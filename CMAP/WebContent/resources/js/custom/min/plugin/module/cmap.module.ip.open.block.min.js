var resultTable_blockedIpRecord,blockedIpTableHeight,blockReasonShowLength=30,_navAndMenuAndFooterHeight=0,_deductHeight=0;function calBlockedIpSectionHeight(){_navAndMenuAndFooterHeight=0,_deductHeight=0,_navAndMenuAndFooterHeight="none"!=$(".mobile-menu").css("display")&&null!=$(".mobile-menu").css("display")?$(".navbar").outerHeight()+$(".footer").outerHeight()+$(".mobile-menu").outerHeight():$(".navbar").outerHeight()+$(".footer").outerHeight(),"none"!=$(".search-bar-large").css("display")&&null!=$(".search-bar-large").css("display")?(_navAndMenuAndFooterHeight+=$(".search-bar-large").outerHeight(),_deductHeight=250):_deductHeight=350,"none"!=$(".mainTable").css("display")&&null!=$(".mainTable").css("display")&&(_deductHeight+=$(".mainTable").outerHeight()),"none"!=$("#divBlockedTitle").css("display")&&null!=$("#divBlockedTitle").css("display")&&(_deductHeight+=$("#divBlockedTitle").outerHeight()),console.log("================================================="),console.log("window.innerHeight: "+window.innerHeight+" ... _navAndMenuAndFooterHeight: "+_navAndMenuAndFooterHeight+" ... _deductHeight: "+_deductHeight),blockedIpTableHeight=Math.round(window.innerHeight-_navAndMenuAndFooterHeight-_deductHeight),console.log("blockedIpTableHeight >> "+blockedIpTableHeight),blockedIpTableHeight=blockedIpTableHeight<165?165:blockedIpTableHeight}function findBlockedIpRecordData(){calBlockedIpSectionHeight(),console.log("blockedIpTableHeight >> "+blockedIpTableHeight),void 0!==resultTable_blockedIpRecord?resultTable_blockedIpRecord.ajax.reload():($("#divBlockedIpRecord").show(),resultTable_blockedIpRecord=$("#resultTable_blockedIpRecord").DataTable({autoWidth:!0,paging:!0,bFilter:!0,ordering:!0,info:!0,serverSide:!0,bLengthChange:!0,pagingType:"full",processing:!0,scrollX:!0,scrollY:blockedIpTableHeight,scrollCollapse:!0,language:{url:_ctx+"/resources/js/dataTable/i18n/Chinese-traditional.json"},createdRow:function(e,t,a){null!=t.actionScript&&t.actionScript.length>scriptShowLength&&($(e).children("td").eq(5).attr("onclick","javascript:showFullScript($(this));"),$(e).children("td").eq(5).addClass("cursor_zoom_in")),$(e).children("td").eq(5).attr("content",t.actionScript),null!=t.checkScript&&t.checkScript.length>scriptShowLength&&($(e).children("td").eq(7).attr("onclick","javascript:showFullScript($(this));"),$(e).children("td").eq(7).addClass("cursor_zoom_in")),$(e).children("td").eq(7).attr("content",t.checkScript)},ajax:{url:_ctx+"/delivery/getBlockedIpData.json",type:"POST",data:function(e){return e.queryGroupId="3170",e},error:function(e,t,a){ajaxErrorHandler()}},order:[[3,"desc"]],pageLength:100,drawCallback:function(e){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust(),$("div.dataTables_length").parent().removeClass("col-sm-12"),$("div.dataTables_length").parent().addClass("col-sm-6"),$("div.dataTables_filter").parent().removeClass("col-sm-12"),$("div.dataTables_filter").parent().addClass("col-sm-6"),$("div.dataTables_info").parent().removeClass("col-sm-12"),$("div.dataTables_info").parent().addClass("col-sm-6"),$("div.dataTables_paginate").parent().removeClass("col-sm-12"),$("div.dataTables_paginate").parent().addClass("col-sm-6")},columns:[{},{},{data:"ipAddress",className:"center"},{data:"blockTimeStr",className:"center"},{},{data:"blockBy",className:"center"}],columnDefs:[{targets:[0],className:"center",searchable:!1,orderable:!1,render:function(e,t,a){return'<input type="checkbox" id="chkbox_blockedIp" name="chkbox_blockedIp" onclick="changeTrBgColor(this)" value='+a.listId+">"}},{targets:[1],className:"center",searchable:!1,orderable:!1,render:function(e,t,a,l){return l.row+l.settings._iDisplayStart+1}},{targets:[4],className:"left",searchable:!0,orderable:!1,render:function(e,t,a){return null!=a.blockReason&&a.blockReason.length>blockReasonShowLength?getPartialContentHtml(a.blockReason,blockReasonShowLength):a.blockReason}}]}))}$(document).ready(function(){findBlockedIpRecordData()});