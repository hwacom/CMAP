var timer,startTime,timer_start,timer_end;function showExportPanelSelf(a){$("#dataExportModal").modal({backdrop:"static"}),$("#dataExportModal_recordCountSelect").val("").change(),$("#dataExportModal_recordCountInput").val(""),$("#dataExportModal_var1").val(a+"D")}function doDataExport(a){var e=$("#dataExportModal_var1").val(),t=e.replace("D",""),n=new Object;n.queryGroup=$("#queryGroup").val(),n.queryDatePeriod=t,n.var1=e,n.exportRecordCount=a,$.ajax({url:_ctx+"/plugin/module/netFlow/ranking/trafficDataExport.json",data:n,type:"POST",dataType:"json",async:!0,beforeSend:function(a){showProcessing()},complete:function(){hideProcessing()},initComplete:function(a,e){},success:function(a){if(200==a.code){const e=a.data.fileId,t=getResourceDownloadLink(e);location.href=t,closeExportPanel()}else alert(a.message)},error:function(a,e,t){ajaxErrorHandler()}})}function findData(a,e){$("#queryFrom").val(a),$("#queryDatePeriod").val(e),"MOBILE"==a&&$("#collapseExample").collapse("hide"),"undefined"!=typeof resultTable?(resultTable.ajax.reload(),$(".myTableSection").show()):($(".myTableSection").show(),resultTable=$("#resultTable").DataTable({autoWidth:!0,paging:!0,bFilter:!0,ordering:!0,info:!0,serverSide:!0,bLengthChange:!0,pagingType:"full",processing:!0,scrollX:!0,scrollY:dataTableHeight,scrollCollapse:!0,pageLength:100,language:{url:_ctx+"/resources/js/dataTable/i18n/Chinese-traditional.json"},createdRow:function(a,e,t){},ajax:{url:_ctx+"/plugin/module/netFlow/ranking/getNetFlowRankingTrafficData.json",type:"POST",data:function(a){return"WEB"==$("#queryFrom").val()?a.queryGroup=$("#queryGroup").val():"MOBILE"==$("#queryFrom").val()&&(a.queryGroup=$("#queryGroup_mobile").val()),a.queryDatePeriod=$("#queryDatePeriod").val(),a},beforeSend:function(){},complete:function(){},error:function(a,e,t){ajaxErrorHandler()},timeout:1e3*parseInt(_timeout)},order:[[4,"desc"]],initComplete:function(a,e){null!=e.msg&&($(".myTableSection").hide(),alert(e.msg))},drawCallback:function(a){$("div.dataTables_length").parent().removeClass("col-sm-12"),$("div.dataTables_length").parent().addClass("col-sm-6"),$("div.dataTables_filter").parent().removeClass("col-sm-12"),$("div.dataTables_filter").parent().addClass("col-sm-6"),$("div.dataTables_info").parent().removeClass("col-sm-12"),$("div.dataTables_info").parent().addClass("col-sm-6"),$("div.dataTables_paginate").parent().removeClass("col-sm-12"),$("div.dataTables_paginate").parent().addClass("col-sm-6"),$("#resultTable > tbody > tr").length>1&&$("#resultTable > tbody > tr:eq(0)").addClass("summary-tr"),bindTrEvent()},columns:[{},{data:"ipAddress"},{data:"ipDesc"},{data:"groupName",searchable:!1},{data:"percent",searchable:!1},{data:"totalTraffic",searchable:!1},{data:"uploadTraffic",searchable:!1},{data:"downloadTraffic",searchable:!1}],columnDefs:[{targets:[0],className:"center",searchable:!1,orderable:!1,render:function(a,e,t,n){return 0==n.row?"":n.row+n.settings._iDisplayStart}}]}))}$(document).ready(function(){var a=window.location.pathname;"/all"===a.substring(a.lastIndexOf("/"),a.length)?initMenuStatus("toggleMenu_prtg","toggleMenu_prtg_items","mp_netFlowCurrentRanking_traffic_all"):initMenuStatus("toggleMenu_prtg","toggleMenu_prtg_items","mp_netFlowCurrentRanking_traffic"),$("#btnSearch_1_web").click(function(a){findData("WEB",1)}),$("#btnSearch_3_web").click(function(a){findData("WEB",3)}),$("#btnSearch_7_web").click(function(a){findData("WEB",7)}),$("#btnSearch_1_mobile").click(function(a){findData("MOBILE",1)}),$("#btnSearch_3_mobile").click(function(a){findData("MOBILE",3)}),$("#btnSearch_7_mobile").click(function(a){findData("MOBILE",7)}),$("#btnExport_1d").click(function(a){showExportPanelSelf(1)}),$("#btnExport_3d").click(function(a){showExportPanelSelf(3)}),$("#btnExport_7d").click(function(a){showExportPanelSelf(7)})});