var timer,startTime,timer_start,timer_end;function doDataExport(e){if(0!=$("#queryDateBegin").val().trim().length&&0!=$("#queryDateEnd").val().trim().length){var a=new Object;a.queryGroup=$("#queryGroup").val(),a.queryDateBegin=$("#queryDateBegin").val(),a.queryDateEnd=$("#queryDateEnd").val(),a.exportRecordCount=e,$.ajax({url:_ctx+"/plugin/module/netFlow/ranking/trafficDataExport.json",data:a,type:"POST",dataType:"json",async:!0,beforeSend:function(e){showProcessing()},complete:function(){hideProcessing()},initComplete:function(e,a){},success:function(e){if(200==e.code){const a=e.data.fileId,t=getResourceDownloadLink(a);location.href=t,closeExportPanel()}else alert(e.message)},error:function(e,a,t){ajaxErrorHandler()}})}else alert(msg_chooseDate)}function findData(e){$("#queryFrom").val(e),0!=$("#queryDateBegin").val().trim().length&&0!=$("#queryDateEnd").val().trim().length?("MOBILE"==e&&$("#collapseExample").collapse("hide"),"undefined"!=typeof resultTable?(resultTable.ajax.reload(),$(".myTableSection").show()):($(".myTableSection").show(),resultTable=$("#resultTable").DataTable({autoWidth:!0,paging:!0,bFilter:!0,ordering:!0,info:!0,serverSide:!0,bLengthChange:!0,pagingType:"full",processing:!0,scrollX:!0,scrollY:dataTableHeight,scrollCollapse:!0,pageLength:100,language:{url:_ctx+"/resources/js/dataTable/i18n/Chinese-traditional.json"},createdRow:function(e,a,t){},ajax:{url:_ctx+"/plugin/module/netFlow/ranking/getNetFlowRankingTrafficData.json",type:"POST",data:function(e){return"WEB"==$("#queryFrom").val()?(e.queryGroup=$("#queryGroup").val(),e.queryDateBegin=$("#queryDateBegin").val(),e.queryDateEnd=$("#queryDateEnd").val()):"MOBILE"==$("#queryFrom").val()&&(e.queryGroup=$("#queryGroup_mobile").val(),e.queryDateBegin=$("#queryDateBegin_mobile").val(),e.queryDateEnd=$("#queryDateEnd_mobile").val()),e},beforeSend:function(){},complete:function(){},error:function(e,a,t){ajaxErrorHandler()},timeout:1e3*parseInt(_timeout)},order:[[4,"desc"]],initComplete:function(e,a){null!=a.msg&&($(".myTableSection").hide(),alert(a.msg))},drawCallback:function(e){$("div.dataTables_length").parent().removeClass("col-sm-12"),$("div.dataTables_length").parent().addClass("col-sm-6"),$("div.dataTables_filter").parent().removeClass("col-sm-12"),$("div.dataTables_filter").parent().addClass("col-sm-6"),$("div.dataTables_info").parent().removeClass("col-sm-12"),$("div.dataTables_info").parent().addClass("col-sm-6"),$("div.dataTables_paginate").parent().removeClass("col-sm-12"),$("div.dataTables_paginate").parent().addClass("col-sm-6"),$("#resultTable > tbody > tr").length>1&&$("#resultTable > tbody > tr:eq(0)").addClass("summary-tr"),bindTrEvent()},columns:[{},{data:"ipAddress"},{data:"ipDesc"},{data:"groupName",searchable:!1},{data:"percent",searchable:!1},{data:"totalTraffic",searchable:!1},{data:"uploadTraffic",searchable:!1},{data:"downloadTraffic",searchable:!1},{data:"sessionNum",searchable:!1}],columnDefs:[{targets:[0],className:"center",searchable:!1,orderable:!1,render:function(e,a,t,n){return 0==n.row?"":n.row+n.settings._iDisplayStart}}]}))):alert(msg_chooseDate)}$(document).ready(function(){var e=window.location.pathname;"/all"===e.substring(e.lastIndexOf("/"),e.length)?initMenuStatus("toggleMenu_prtg","toggleMenu_prtg_items","mp_netFlowCurrentRanking_traffic_all"):initMenuStatus("toggleMenu_prtg","toggleMenu_prtg_items","mp_netFlowCurrentRanking_traffic"),$("#btn_1d_web").click(function(){var e=new Date,a=new Date;e.setDate(e.getDate()-1+1),$("#queryDateBegin").val(e.format("yyyy-MM-dd")),$("#queryDateEnd").val(a.format("yyyy-MM-dd"))}),$("#btn_3d_web").click(function(){var e=new Date,a=new Date;e.setDate(e.getDate()-3+1),$("#queryDateBegin").val(e.format("yyyy-MM-dd")),$("#queryDateEnd").val(a.format("yyyy-MM-dd"))}),$("#btn_7d_web").click(function(){var e=new Date,a=new Date;e.setDate(e.getDate()-7+1),$("#queryDateBegin").val(e.format("yyyy-MM-dd")),$("#queryDateEnd").val(a.format("yyyy-MM-dd"))}),$("#btn_1d_mobile").click(function(){var e=new Date,a=new Date;e.setDate(e.getDate()-1+1),$("#queryDateBegin_mobile").val(e.format("yyyy-MM-dd")),$("#queryDateEnd_mobile").val(a.format("yyyy-MM-dd"))}),$("#btn_3d_mobile").click(function(){var e=new Date,a=new Date;e.setDate(e.getDate()-3+1),$("#queryDateBegin_mobile").val(e.format("yyyy-MM-dd")),$("#queryDateEnd_mobile").val(a.format("yyyy-MM-dd"))}),$("#btn_7d_mobile").click(function(){var e=new Date,a=new Date;e.setDate(e.getDate()-7+1),$("#queryDateBegin_mobile").val(e.format("yyyy-MM-dd")),$("#queryDateEnd_mobile").val(a.format("yyyy-MM-dd"))});var a=new Date,t=new Date;a.setDate(a.getDate()-1+1),$("#queryDateBegin").val(a.format("yyyy-MM-dd")),$("#queryDateEnd").val(t.format("yyyy-MM-dd")),$("#queryDateBegin_mobile").val(a.format("yyyy-MM-dd")),$("#queryDateEnd_mobile").val(t.format("yyyy-MM-dd"));new Cleave(".input-date-begin",{date:!0,delimiter:"-",datePattern:["Y","m","d"]}),new Cleave(".input-date-end",{date:!0,delimiter:"-",datePattern:["Y","m","d"]}),new Cleave(".input-date-begin-mobile",{date:!0,delimiter:"-",datePattern:["Y","m","d"]}),new Cleave(".input-date-end-mobile",{date:!0,delimiter:"-",datePattern:["Y","m","d"]})});