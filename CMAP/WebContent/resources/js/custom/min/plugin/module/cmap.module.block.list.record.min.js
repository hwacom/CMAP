var resultTable_blockedRecord,blockedTableHeight,blockReasonShowLength=30,openReasonShowLength=30,_navAndMenuAndFooterHeight=0,_deductHeight=0;function findBlockedRecordData(){calBlockedSectionHeight(),void 0!==resultTable_blockedRecord&&"undefined"==typeof statusFlag?resultTable_blockedRecord.ajax.reload():($("#divBlockedRecord").show(),resultTable_blockedRecord=$("#resultTable_blockedRecord").DataTable({autoWidth:!0,paging:!0,bFilter:!0,ordering:!0,info:!0,serverSide:!0,bLengthChange:!0,pagingType:"full",processing:!0,scrollX:!0,scrollY:blockedTableHeight,scrollCollapse:!0,bDestroy:!0,language:{url:_ctx+"/resources/js/dataTable/i18n/Chinese-traditional.json"},createdRow:function(e,a,t){null!=a.blockReason&&a.blockReason.length>blockReasonShowLength&&($(e).children("td").eq(8).attr("onclick","javascript:changeShowContent(this, "+blockReasonShowLength+");"),$(e).children("td").eq(8).addClass("cursor_zoom_in")),$(e).children("td").eq(8).attr("content",a.blockReason)},ajax:{url:_ctx+"/plugin/module/blockedRecord/getBlockedData.json",type:"POST",data:function(e){return"WEB"==$("#queryFrom").val()?e.queryGroupId=$("#queryGroup").val():"MOBILE"==$("#queryFrom").val()&&(e.queryGroupId=$("#queryGroup_mobile").val()),e.queryStatusFlag="B",e},error:function(e,a,t){ajaxErrorHandler()}},order:[[3,"asc"],[7,"desc"]],pageLength:100,rowCallback:function(e,a){$("td:eq(0)",e).attr("data-field","seq"),$("td:eq(1)",e).attr("data-field","groupName"),$("td:eq(2)",e).attr("data-field","deviceName"),$("td:eq(3)",e).attr("data-field","blockType"),$("td:eq(4)",e).attr("data-field","address"),$("td:eq(5)",e).attr("data-field","ipDesc"),$("td:eq(6)",e).attr("data-field","status"),$("td:eq(7)",e).attr("data-field","blockTime"),$("td:eq(8)",e).attr("data-field","blockReason"),$("td:eq(9)",e).attr("data-field","blockBy"),$("td:eq(10)",e).attr("data-field","scriptName")},columns:[{},{data:"groupName",className:"left"},{data:"deviceName",className:"left"},{data:"blockType",className:"center"},{data:"address",className:"left"},{data:"ipDesc",className:"left"},{data:"statusFlag",className:"center"},{data:"blockTimeStr",className:"center"},{},{data:"blockBy",className:"center"},{data:"scriptName",defaultContent:""}],columnDefs:[{targets:[0],className:"center",searchable:!1,orderable:!1,render:function(e,a,t,l){return l.row+l.settings._iDisplayStart+1}},{targets:[8],className:"left",searchable:!0,orderable:!1,render:function(e,a,t){return null!=t.blockReason&&t.blockReason.length>blockReasonShowLength?getPartialContentHtml(t.blockReason,blockReasonShowLength):t.blockReason}}]}))}function calBlockedSectionHeight(){_navAndMenuAndFooterHeight=0,_deductHeight=0,_navAndMenuAndFooterHeight="none"!=$(".mobile-menu").css("display")&&null!=$(".mobile-menu").css("display")?$(".navbar").outerHeight()+$(".footer").outerHeight()+$(".mobile-menu").outerHeight():$(".navbar").outerHeight()+$(".footer").outerHeight(),"none"!=$(".search-bar-large").css("display")&&null!=$(".search-bar-large").css("display")?(_navAndMenuAndFooterHeight+=$(".search-bar-large").outerHeight(),_deductHeight=110):_deductHeight=210,"none"!=$(".mainTable").css("display")&&null!=$(".mainTable").css("display")&&(_deductHeight+=$(".mainTable").outerHeight()),"none"!=$("#divBlockedTitle").css("display")&&null!=$("#divBlockedTitle").css("display")&&(_deductHeight+=$("#divBlockedTitle").outerHeight()),blockedTableHeight=(blockedTableHeight=Math.round(window.innerHeight-_navAndMenuAndFooterHeight-_deductHeight))<165?165:blockedTableHeight}$(document).ready(function(){initMenuStatus("toggleMenu_plugin","toggleMenu_plugin_items","cm_blockedListRecord"),$("#btnSearch_record_web").click(function(e){$("#queryFrom").val("WEB"),findBlockedRecordData()}),$("#btnSearch_record_mobile").click(function(e){$("#queryFrom").val("MOBILE"),$("#collapseExample").collapse("hide"),findBlockedRecordData()})});